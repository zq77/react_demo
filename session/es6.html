<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ES6</title>
<script type="application/javascript">
    // let & const
    const constant = 'abc';
    // constant = '123';
    console.log("const : " + constant);
    let item = 'abc';
    console.log("let : " + item);
    item = '123';
    console.log("let : " + item);

    function varTest() {
        var x = 1;
        if (true) {
            var x = 2;  // same variable!
            console.log("varTest : " + x);  // 2
        }
        console.log("varTest : " + x);  // 2
    }

    function letTest() {
        let x = 1;
        if (true) {
            let x = 2;  // different variable
            console.log("letTest : " + x);  // 2
        }
        console.log("letTest : " + x);  // 1
    }
    // let 无法在全局作用域中定义变量
    var x = 'global';
    let y = 'global';
    console.log(this.x); // "global"
    console.log(this.y); // undefined
    varTest();
    letTest();

    // ->
    var obj = {
        birth: 1990,
        getAge: function () {
            // var that = this;
            const fn = function () {
                return this.birth; // this指向window或undefined
                // return that.birth;
            };
            return fn();
        }
    };
    console.log("function: " + obj.getAge()); // undefined

    var obj2 = {
        birth: 1990,
        getAge: function () {
            var b = this.birth; // 1990
            var fn = () => this.birth; // this指向obj对象
            return fn();
        }
    };
    console.log(`=> : ${obj2.getAge()}`); // 1990

</script>
</head>
<body>
</body>
</html>